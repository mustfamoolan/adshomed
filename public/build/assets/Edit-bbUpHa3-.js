import{u as y,r as x,j as e,H as j}from"./app-CX5FMW1s.js";import{A as N}from"./AdminLayout-Bv6JVXqp.js";const b=[{value:"web",label:"موقع ويب"},{value:"android",label:"أندرويد"},{value:"ios",label:"آيفون"},{value:"desktop",label:"سطح المكتب"},{value:"facebook",label:"فيسبوك"},{value:"instagram",label:"إنستغرام"},{value:"youtube",label:"يوتيوب"},{value:"telegram",label:"تليغرام"},{value:"whatsapp",label:"واتساب"},{value:"other",label:"أخرى"}];function k({project:a,managers:p}){const{data:r,setData:n,put:g,processing:m,errors:t}=y({name:a.name||"",description:a.description||"",initial_budget:a.initial_budget||"",total_revenue:a.total_revenue||0,sales_count:a.sales_count||0,downloads_count:a.downloads_count||0,type:a.type||"sales",status:a.status||"planning",manager_id:a.manager_id||"",development_start_date:a.development_start_date||"",development_end_date:a.development_end_date||"",publication_date:a.publication_date||"",publication_status:a.publication_status||"not_displayed",platforms:a.platforms?.map(s=>s.platform)||[],platform_urls:a.platforms?.map(s=>s.platform_url||"")||[]}),[i,c]=x.useState([]);x.useEffect(()=>{if(a.platforms){const s=a.platforms.map(d=>({value:d.platform,label:b.find(l=>l.value===d.platform)?.label||d.platform,url:d.platform_url||""}));c(s)}},[a.platforms]);const h=s=>{if(i.some(l=>l.value===s.value)){const l=i.filter(o=>o.value!==s.value);c(l),n({...r,platforms:l.map(o=>o.value),platform_urls:l.map(o=>o.url||"")})}else{const l=[...i,{...s,url:""}];c(l),n({...r,platforms:l.map(o=>o.value),platform_urls:l.map(o=>o.url||"")})}},f=(s,d)=>{const l=[...i];l[s].url=d,c(l),n({...r,platform_urls:l.map(o=>o.url||"")})},v=s=>{s.preventDefault(),g(route("admin.projects.update",a.id))},u=s=>new Intl.NumberFormat("en-US",{style:"currency",currency:"IQD",minimumFractionDigits:0}).format(s||0);return e.jsxs(N,{children:[e.jsx(j,{title:`تعديل المشروع - ${a.name}`}),e.jsx("div",{className:"min-h-screen bg-gray-50/80 px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-8",children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:["تعديل المشروع: ",a.name]}),e.jsx("p",{className:"text-gray-600",children:"قم بتعديل تفاصيل المشروع والميزانيات"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 mt-6",children:[e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[e.jsx("p",{className:"text-sm text-blue-600 font-medium",children:"الميزانية الإجمالية"}),e.jsx("p",{className:"text-lg font-bold text-blue-900",children:u(a.total_budget)})]}),e.jsxs("div",{className:"bg-green-50 rounded-lg p-4",children:[e.jsx("p",{className:"text-sm text-green-600 font-medium",children:"إجمالي الإيرادات"}),e.jsx("p",{className:"text-lg font-bold text-green-900",children:u(a.total_revenue)})]}),e.jsxs("div",{className:`rounded-lg p-4 ${a.profit>=0?"bg-emerald-50":"bg-red-50"}`,children:[e.jsx("p",{className:`text-sm font-medium ${a.profit>=0?"text-emerald-600":"text-red-600"}`,children:"صافي الربح"}),e.jsx("p",{className:`text-lg font-bold ${a.profit>=0?"text-emerald-900":"text-red-900"}`,children:u(a.profit)})]})]})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-8",children:e.jsxs("form",{onSubmit:v,className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"المعلومات الأساسية"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["اسم المشروع ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:r.name,onChange:s=>n("name",s.target.value),className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors ${t.name?"border-red-300":"border-gray-300"}`,placeholder:"ادخل اسم المشروع"}),t.name&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.name})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["مدير المشروع ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:r.manager_id,onChange:s=>n("manager_id",s.target.value),className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors ${t.manager_id?"border-red-300":"border-gray-300"}`,children:[e.jsx("option",{value:"",children:"اختر مدير المشروع"}),p.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]}),t.manager_id&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.manager_id})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["نوع المشروع ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:r.type,onChange:s=>n("type",s.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",children:[e.jsx("option",{value:"sales",children:"مبيعات"}),e.jsx("option",{value:"subscription",children:"اشتراكات"}),e.jsx("option",{value:"free",children:"مجاني"}),e.jsx("option",{value:"downloads",children:"تحميلات"})]}),t.type&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.type})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["حالة المشروع ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:r.status,onChange:s=>n("status",s.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",children:[e.jsx("option",{value:"planning",children:"في التخطيط"}),e.jsx("option",{value:"active",children:"نشط"}),e.jsx("option",{value:"completed",children:"مكتمل"}),e.jsx("option",{value:"paused",children:"متوقف مؤقت"}),e.jsx("option",{value:"cancelled",children:"ملغى"})]}),t.status&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.status})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["الميزانية الأولية ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",min:"0",step:"0.01",value:r.initial_budget,onChange:s=>n("initial_budget",s.target.value),className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors ${t.initial_budget?"border-red-300":"border-gray-300"}`,placeholder:"0.00"}),t.initial_budget&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.initial_budget})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"إجمالي الإيرادات"}),e.jsx("input",{type:"number",min:"0",step:"0.01",value:r.total_revenue,onChange:s=>n("total_revenue",s.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",placeholder:"0.00"}),t.total_revenue&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.total_revenue})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"عدد المبيعات"}),e.jsx("input",{type:"number",min:"0",value:r.sales_count,onChange:s=>n("sales_count",s.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",placeholder:"0"}),t.sales_count&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.sales_count})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"عدد التحميلات"}),e.jsx("input",{type:"number",min:"0",value:r.downloads_count,onChange:s=>n("downloads_count",s.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",placeholder:"0"}),t.downloads_count&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.downloads_count})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["حالة النشر ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:r.publication_status,onChange:s=>n("publication_status",s.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",children:[e.jsx("option",{value:"not_displayed",children:"لم يعرض"}),e.jsx("option",{value:"published",children:"منشور"}),e.jsx("option",{value:"unpublished",children:"مغلق"})]}),t.publication_status&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.publication_status})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mt-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"تاريخ بداية التطوير"}),e.jsx("input",{type:"date",value:r.development_start_date,onChange:s=>n("development_start_date",s.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors"}),t.development_start_date&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.development_start_date})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"تاريخ انتهاء التطوير"}),e.jsx("input",{type:"date",value:r.development_end_date,onChange:s=>n("development_end_date",s.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors"}),t.development_end_date&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.development_end_date})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"تاريخ النشر"}),e.jsx("input",{type:"date",value:r.publication_date,onChange:s=>n("publication_date",s.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors"}),t.publication_date&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.publication_date})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"وصف المشروع"}),e.jsx("textarea",{rows:4,value:r.description,onChange:s=>n("description",s.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",placeholder:"ادخل وصف مفصل للمشروع"}),t.description&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.description})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"المنصات"}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-4 mb-6",children:b.map(s=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:s.value,checked:i.some(d=>d.value===s.value),onChange:()=>h(s),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:s.value,className:"mr-2 text-sm text-gray-700",children:s.label})]},s.value))}),i.length>0&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-md font-medium text-gray-900",children:"روابط المنصات"}),i.map((s,d)=>e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["رابط ",s.label]}),e.jsx("input",{type:"url",value:s.url||"",onChange:l=>f(d,l.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",placeholder:`ادخل رابط منصة ${s.label}`})]},s.value))]})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-4 space-x-reverse pt-6 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:()=>window.history.back(),className:"px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-medium",children:"إلغاء"}),e.jsx("button",{type:"submit",disabled:m,className:"px-6 py-3 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-lg hover:from-blue-600 hover:to-blue-700 transition-all duration-200 font-medium disabled:opacity-50",children:m?"جاري التحديث...":"تحديث المشروع"})]})]})})]})})]})}export{k as default};
