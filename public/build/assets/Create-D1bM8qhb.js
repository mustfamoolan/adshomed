import{u as b,j as e,H as h}from"./app-CX5FMW1s.js";import{A as g}from"./AdminLayout-Bv6JVXqp.js";function _({projects:d,clientProjects:i,statusOptions:c,customerTypeOptions:n,projectTypeOptions:u}){const{data:r,setData:l,post:m,processing:o,errors:t}=b({name:"",phone:"",customer_type:"service_request",project_id:"",client_project_id:"",subscription_type:"",status:"potential_buyer",initial_notes:"",source:""}),x=s=>{s.preventDefault(),m(route("admin.customers.store"))};return e.jsxs(g,{title:"إضافة عميل جديد",children:[e.jsx(h,{title:"إضافة عميل جديد"}),e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"إضافة عميل جديد"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"أدخل بيانات العميل الجديد وحدد نوعه والمشروع المرتبط به"})]}),e.jsxs("form",{onSubmit:x,className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"نوع العميل *"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:Object.entries(n).map(([s,a])=>e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"radio",id:`customer_type_${s}`,name:"customer_type",value:s,checked:r.customer_type===s,onChange:p=>l("customer_type",p.target.value),className:"sr-only"}),e.jsxs("label",{htmlFor:`customer_type_${s}`,className:`block w-full p-4 text-center border-2 rounded-lg cursor-pointer transition-all duration-200 ${r.customer_type===s?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-300 bg-white text-gray-700 hover:border-gray-400"}`,children:[e.jsx("div",{className:"font-medium",children:a}),e.jsxs("div",{className:"text-xs mt-1",children:[s==="service_request"&&"عميل يحتاج خدمة أو استشارة",s==="our_project_client"&&"عميل مهتم بأحد مشاريعنا",s==="client_project_owner"&&"صاحب مشروع نقوم بتطويره"]})]})]},s))}),t.customer_type&&e.jsx("p",{className:"mt-2 text-sm text-red-600",children:t.customer_type})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"المعلومات الأساسية"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"اسم العميل *"}),e.jsx("input",{type:"text",value:r.name,onChange:s=>l("name",s.target.value),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${t.name?"border-red-300":"border-gray-300"}`,placeholder:"أدخل اسم العميل"}),t.name&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"رقم الهاتف *"}),e.jsx("input",{type:"tel",value:r.phone,onChange:s=>l("phone",s.target.value),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${t.phone?"border-red-300":"border-gray-300"}`,placeholder:"مثال: 966501234567"}),t.phone&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.phone})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"مصدر العميل"}),e.jsx("input",{type:"text",value:r.source,onChange:s=>l("source",s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"مثال: إعلان فيسبوك، إحالة صديق، موقع إلكتروني"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"حالة العميل *"}),e.jsx("select",{value:r.status,onChange:s=>l("status",s.target.value),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${t.status?"border-red-300":"border-gray-300"}`,children:Object.entries(c).map(([s,a])=>e.jsx("option",{value:s,children:a},s))}),t.status&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.status})]})]})]}),r.customer_type!=="service_request"&&e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"معلومات المشروع"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.customer_type==="our_project_client"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"المشروع/البرنامج *"}),e.jsxs("select",{value:r.project_id,onChange:s=>l("project_id",s.target.value),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${t.project_id?"border-red-300":"border-gray-300"}`,children:[e.jsx("option",{value:"",children:"اختر المشروع"}),d.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]}),t.project_id&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.project_id})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"نوع المشروع *"}),e.jsxs("select",{value:r.subscription_type,onChange:s=>l("subscription_type",s.target.value),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${t.subscription_type?"border-red-300":"border-gray-300"}`,children:[e.jsx("option",{value:"",children:"اختر نوع المشروع"}),Object.entries(u).map(([s,a])=>e.jsx("option",{value:s,children:a},s))]}),t.subscription_type&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.subscription_type}),e.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:[r.subscription_type==="sale"&&"سيتم إنشاء كود تفعيل للعميل",r.subscription_type==="subscription"&&"سيتم إنشاء كود تفعيل للاشتراك",r.subscription_type==="download"&&"يمكن إضافة معرف التحميل لاحقاً"]})]})]}),r.customer_type==="client_project_owner"&&e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"مشروع العميل *"}),e.jsxs("select",{value:r.client_project_id,onChange:s=>l("client_project_id",s.target.value),className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${t.client_project_id?"border-red-300":"border-gray-300"}`,children:[e.jsx("option",{value:"",children:"اختر مشروع العميل"}),i.map(s=>e.jsxs("option",{value:s.id,children:[s.name," - ",s.client_name]},s.id))]}),t.client_project_id&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.client_project_id}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"اختر المشروع الذي يملكه العميل والذي نقوم بتطويره"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"ملاحظات أولية"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ملاحظات العميل"}),e.jsx("textarea",{value:r.initial_notes,onChange:s=>l("initial_notes",s.target.value),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"أضف أي ملاحظات مهمة حول العميل، متطلباته، أو تفاصيل المحادثة الأولى..."}),e.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"هذه الملاحظات ستظهر في سجل الملاحظات الخاص بالعميل"})]})]}),r.customer_type&&e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("svg",{className:"w-5 h-5 text-blue-600 mt-0.5 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-medium text-blue-900",children:"معلومات حول نوع العميل"}),e.jsxs("div",{className:"mt-1 text-sm text-blue-800",children:[r.customer_type==="service_request"&&e.jsx("p",{children:"سيتم إنشاء طلب خدمة تلقائياً للعميل. يمكن إضافة الملاحظات والطلبات لاحقاً."}),r.customer_type==="our_project_client"&&e.jsxs(e.Fragment,{children:[e.jsx("p",{children:"عميل مهتم بأحد مشاريعنا."}),r.subscription_type==="sale"&&e.jsx("p",{children:"• سيتم إنشاء كود تفعيل للبيع"}),r.subscription_type==="subscription"&&e.jsx("p",{children:"• سيتم إنشاء كود تفعيل للاشتراك"}),r.subscription_type==="download"&&e.jsx("p",{children:"• يمكن إضافة معرف التحميل من صفحة العميل"})]}),r.customer_type==="client_project_owner"&&e.jsx("p",{children:"صاحب مشروع نقوم بتطويره. سيتم ربطه بالمشروع المحدد لتتبع التطوير والتكاليف."})]})]})]})}),e.jsxs("div",{className:"flex items-center justify-end space-x-4 pt-6 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:()=>window.history.back(),className:"px-6 py-2 border border-gray-300 text-gray-700 text-sm font-medium rounded-lg hover:bg-gray-50 transition-colors duration-200",children:"إلغاء"}),e.jsx("button",{type:"submit",disabled:o,className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white text-sm font-medium rounded-lg transition-colors duration-200",children:o?"جاري الحفظ...":"حفظ العميل"})]})]})]})]})}export{_ as default};
