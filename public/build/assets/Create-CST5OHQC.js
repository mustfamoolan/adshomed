import{u as N,r as p,j as e,H as _}from"./app-CX5FMW1s.js";import{A as w}from"./AdminLayout-Bv6JVXqp.js";const k=[{value:"web",label:"موقع ويب"},{value:"android",label:"أندرويد"},{value:"ios",label:"آيفون"},{value:"desktop",label:"سطح المكتب"},{value:"facebook",label:"فيسبوك"},{value:"instagram",label:"إنستغرام"},{value:"youtube",label:"يوتيوب"},{value:"telegram",label:"تليغرام"},{value:"whatsapp",label:"واتساب"},{value:"other",label:"أخرى"}];function S({managers:b}){const{data:o,setData:a,post:g,processing:x,errors:t}=N({name:"",description:"",initial_budget:"",product_price:"",type:"sales",status:"planning",manager_id:"",development_start_date:"",development_end_date:"",publication_date:"",publication_status:"not_displayed",platforms:[],platform_urls:[],subscription_plans:[]}),[d,u]=p.useState([]),[i,m]=p.useState([]),h=s=>{if(d.some(l=>l.value===s.value)){const l=d.filter(n=>n.value!==s.value);u(l),a({...o,platforms:l.map(n=>n.value),platform_urls:l.map(n=>n.url||"")})}else{const l=[...d,{...s,url:""}];u(l),a({...o,platforms:l.map(n=>n.value),platform_urls:l.map(n=>n.url||"")})}},j=(s,r)=>{const l=[...d];l[s].url=r,u(l),a({...o,platform_urls:l.map(n=>n.url||"")})},v=()=>{const s={plan_name:"",price:"",billing_cycle:"monthly",description:""},r=[...i,s];m(r),a("subscription_plans",r)},f=s=>{const r=i.filter((l,n)=>n!==s);m(r),a("subscription_plans",r)},c=(s,r,l)=>{const n=[...i];n[s][r]=l,m(n),a("subscription_plans",n)},y=s=>{s.preventDefault(),g(route("admin.projects.store"))};return e.jsxs(w,{children:[e.jsx(_,{title:"إضافة مشروع جديد"}),e.jsx("div",{className:"min-h-screen bg-gray-50/80 px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-8",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"إضافة مشروع جديد"}),e.jsx("p",{className:"text-gray-600",children:"أضف مشروع جديد وحدد تفاصيله والميزانية الأولية"})]}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-8",children:e.jsxs("form",{onSubmit:y,className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"المعلومات الأساسية"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["اسم المشروع ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:o.name,onChange:s=>a("name",s.target.value),className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors ${t.name?"border-red-300":"border-gray-300"}`,placeholder:"ادخل اسم المشروع"}),t.name&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.name})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["مدير المشروع ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:o.manager_id,onChange:s=>a("manager_id",s.target.value),className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors ${t.manager_id?"border-red-300":"border-gray-300"}`,children:[e.jsx("option",{value:"",children:"اختر مدير المشروع"}),b.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]}),t.manager_id&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.manager_id})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["نوع المشروع ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:o.type,onChange:s=>a("type",s.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",children:[e.jsx("option",{value:"sales",children:"مبيعات"}),e.jsx("option",{value:"subscription",children:"اشتراكات"}),e.jsx("option",{value:"free",children:"مجاني"}),e.jsx("option",{value:"downloads",children:"تحميلات"})]}),t.type&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.type})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["حالة المشروع ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:o.status,onChange:s=>a("status",s.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",children:[e.jsx("option",{value:"planning",children:"في التخطيط"}),e.jsx("option",{value:"active",children:"نشط"}),e.jsx("option",{value:"completed",children:"مكتمل"}),e.jsx("option",{value:"paused",children:"متوقف مؤقت"}),e.jsx("option",{value:"cancelled",children:"ملغى"})]}),t.status&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.status})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["الميزانية الأولية ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",min:"0",step:"0.01",value:o.initial_budget,onChange:s=>a("initial_budget",s.target.value),className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors ${t.initial_budget?"border-red-300":"border-gray-300"}`,placeholder:"0.00"}),t.initial_budget&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.initial_budget})]}),o.type==="sales"&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["سعر المنتج الواحد ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",min:"0",step:"0.01",value:o.product_price,onChange:s=>a("product_price",s.target.value),className:`w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors ${t.product_price?"border-red-300":"border-gray-300"}`,placeholder:"0.00"}),t.product_price&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.product_price})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["حالة النشر ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:o.publication_status,onChange:s=>a("publication_status",s.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",children:[e.jsx("option",{value:"not_displayed",children:"لم يعرض"}),e.jsx("option",{value:"published",children:"منشور"}),e.jsx("option",{value:"unpublished",children:"مغلق"})]}),t.publication_status&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.publication_status})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mt-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"تاريخ بداية التطوير"}),e.jsx("input",{type:"date",value:o.development_start_date,onChange:s=>a("development_start_date",s.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors"}),t.development_start_date&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.development_start_date})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"تاريخ انتهاء التطوير"}),e.jsx("input",{type:"date",value:o.development_end_date,onChange:s=>a("development_end_date",s.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors"}),t.development_end_date&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.development_end_date})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"تاريخ النشر"}),e.jsx("input",{type:"date",value:o.publication_date,onChange:s=>a("publication_date",s.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors"}),t.publication_date&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.publication_date})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"وصف المشروع"}),e.jsx("textarea",{rows:4,value:o.description,onChange:s=>a("description",s.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",placeholder:"ادخل وصف مفصل للمشروع"}),t.description&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:t.description})]})]}),o.type==="subscription"&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"باقات الاشتراك"}),e.jsx("button",{type:"button",onClick:v,className:"px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors",children:"إضافة باقة جديدة"})]}),i.map((s,r)=>e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h4",{className:"font-medium text-gray-900",children:["باقة ",r+1]}),e.jsx("button",{type:"button",onClick:()=>f(r),className:"text-red-600 hover:text-red-700",children:"حذف"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["اسم الباقة ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:s.plan_name,onChange:l=>c(r,"plan_name",l.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"مثل: باقة أساسية"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["السعر ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",min:"0",step:"0.01",value:s.price,onChange:l=>c(r,"price",l.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0.00"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["دورة الفوترة ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:s.billing_cycle,onChange:l=>c(r,"billing_cycle",l.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"monthly",children:"شهري"}),e.jsx("option",{value:"yearly",children:"سنوي"}),e.jsx("option",{value:"lifetime",children:"مدى الحياة"})]})]}),e.jsxs("div",{className:"md:col-span-2 lg:col-span-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"وصف الباقة"}),e.jsx("textarea",{rows:2,value:s.description,onChange:l=>c(r,"description",l.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"وصف مختصر للباقة وميزاتها"})]})]})]},r)),i.length===0&&e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx("p",{children:"لم يتم إضافة أي باقات اشتراك بعد"}),e.jsx("p",{className:"text-sm",children:'اضغط "إضافة باقة جديدة" لبدء إضافة الباقات'})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"المنصات"}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-4 mb-6",children:k.map(s=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:s.value,checked:d.some(r=>r.value===s.value),onChange:()=>h(s),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:s.value,className:"mr-2 text-sm text-gray-700",children:s.label})]},s.value))}),d.length>0&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-md font-medium text-gray-900",children:"روابط المنصات"}),d.map((s,r)=>e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["رابط ",s.label]}),e.jsx("input",{type:"url",value:s.url||"",onChange:l=>j(r,l.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",placeholder:`ادخل رابط منصة ${s.label}`})]},s.value))]})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-4 space-x-reverse pt-6 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:()=>window.history.back(),className:"px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-medium",children:"إلغاء"}),e.jsx("button",{type:"submit",disabled:x,className:"px-6 py-3 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-lg hover:from-blue-600 hover:to-blue-700 transition-all duration-200 font-medium disabled:opacity-50",children:x?"جاري الإنشاء...":"إنشاء المشروع"})]})]})})]})})]})}export{S as default};
