import{r as b,u as D,j as e,H as B,L as u,a as W}from"./app-CX5FMW1s.js";import{A as H}from"./AdminLayout-Bv6JVXqp.js";function z({project:l,campaigns:d,marketingTypes:g}){const[p,n]=b.useState(!1),[x,i]=b.useState(null),{data:r,setData:a,post:j,put:y,processing:c,errors:s,reset:h}=D({project_id:l.id,start_date:"",end_date:"",marketing_type_key:"facebook",budget:""}),o=t=>new Intl.NumberFormat("en-US",{style:"currency",currency:"IQD",minimumFractionDigits:0,maximumFractionDigits:0}).format(t||0),f=t=>{switch(t){case"draft":return"bg-gray-100 text-gray-800 border-gray-200";case"active":return"bg-green-100 text-green-800 border-green-200";case"paused":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"completed":return"bg-blue-100 text-blue-800 border-blue-200";case"cancelled":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},N=t=>{switch(t){case"draft":return"مسودة";case"active":return"نشطة";case"paused":return"متوقفة";case"completed":return"مكتملة";case"cancelled":return"ملغية";default:return"غير محدد"}},v=d.length,k=d.filter(t=>t.status==="active").length,w=d.reduce((t,m)=>t+parseFloat(m.budget||0),0),_=d.reduce((t,m)=>t+parseFloat(m.actual_cost||0),0),C=t=>{t.preventDefault(),j(route("admin.campaigns.store"),{onSuccess:()=>{n(!1),h()}})},L=t=>{t.preventDefault(),y(route("admin.campaigns.update",x.id),{onSuccess:()=>{i(null),h()}})},S=t=>{confirm("هل أنت متأكد من حذف هذه الحملة؟")&&W.delete(route("admin.campaigns.destroy",t))},M=t=>{i(t),a({project_id:l.id,start_date:t.start_date,end_date:t.end_date,marketing_type_key:t.marketing_type_key,budget:t.budget})};return e.jsxs(H,{title:`حملات المشروع: ${l.name}`,children:[e.jsx(B,{title:`حملات المشروع: ${l.name}`}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx(u,{href:route("admin.campaigns.index"),className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"إدارة الحملات"}),e.jsx("span",{className:"text-gray-400",children:"/"}),e.jsx("span",{className:"text-gray-900 text-sm font-medium",children:"حملات المشروع"})]}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:l.name}),e.jsx("p",{className:"text-gray-600 mt-1",children:"إدارة جميع حملات التسويق للمشروع"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>n(!0),className:"inline-flex items-center px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-colors duration-200",children:[e.jsx("svg",{className:"w-4 h-4 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"إضافة حملة جديدة"]}),e.jsx(u,{href:route("admin.projects.show",l.id),className:"inline-flex items-center px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white font-medium rounded-lg transition-colors duration-200",children:"عرض المشروع"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),e.jsxs("div",{className:"mr-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"إجمالي الحملات"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:v.toLocaleString("en-US")})]})]})}),e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsxs("div",{className:"mr-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"حملات نشطة"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:k.toLocaleString("en-US")})]})]})}),e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:e.jsx("svg",{className:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})})}),e.jsxs("div",{className:"mr-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"إجمالي الميزانية"}),e.jsx("p",{className:"text-lg font-bold text-gray-900",children:o(w)})]})]})}),e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-red-100 rounded-lg",children:e.jsx("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 12H4m16 0l-4 4m4-4l-4-4"})})}),e.jsxs("div",{className:"mr-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"إجمالي الإنفاق"}),e.jsx("p",{className:"text-lg font-bold text-red-600",children:o(_)})]})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"قائمة الحملات"})}),d.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"اسم الحملة"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"المنصة"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"الفترة"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"الميزانية"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"الإنفاق"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"الحالة"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"العمليات"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:d.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:t.name}),t.description&&e.jsx("div",{className:"text-sm text-gray-500 truncate max-w-xs",children:t.description})]})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:t.marketing_type?.name_ar||"غير محدد"}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:e.jsxs("div",{children:[e.jsx("div",{children:new Date(t.start_date).toLocaleDateString("en-US")}),e.jsxs("div",{className:"text-gray-500",children:["إلى ",new Date(t.end_date).toLocaleDateString("en-US")]})]})}),e.jsx("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:o(t.budget)}),e.jsx("td",{className:"px-6 py-4 text-sm text-red-600 font-medium",children:o(t.actual_cost)}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full border ${f(t.status)}`,children:N(t.status)})}),e.jsxs("td",{className:"px-6 py-4 text-sm font-medium space-x-2",children:[e.jsx(u,{href:route("admin.campaigns.details",t.id),className:"text-green-600 hover:text-green-900",children:"التفاصيل"}),e.jsx("button",{onClick:()=>M(t),className:"text-blue-600 hover:text-blue-900",children:"تعديل"}),e.jsx("button",{onClick:()=>S(t.id),className:"text-red-600 hover:text-red-900",children:"حذف"})]})]},t.id))})]})}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"لا توجد حملات"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"ابدأ بإنشاء حملة تسويقية جديدة لهذا المشروع."}),e.jsx("div",{className:"mt-6",children:e.jsxs("button",{onClick:()=>n(!0),className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700",children:[e.jsx("svg",{className:"w-4 h-4 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"إضافة حملة جديدة"]})})]})]})]}),p&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsx("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-screen overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"إضافة حملة جديدة"}),e.jsx("button",{onClick:()=>n(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("form",{onSubmit:C,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"تاريخ البداية"}),e.jsx("input",{type:"date",value:r.start_date,onChange:t=>a("start_date",t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0}),s.start_date&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.start_date})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"تاريخ النهاية"}),e.jsx("input",{type:"date",value:r.end_date,onChange:t=>a("end_date",t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",min:r.start_date,required:!0}),s.end_date&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.end_date})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"منصة التسويق"}),e.jsx("select",{value:r.marketing_type_key,onChange:t=>a("marketing_type_key",t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:g.map(t=>e.jsx("option",{value:t.key,children:t.name_ar},t.key))}),s.marketing_type_key&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.marketing_type_key})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"مبلغ التسويق (IQD)"}),e.jsx("input",{type:"number",value:r.budget,onChange:t=>a("budget",t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",min:"0",step:"0.01",required:!0,placeholder:"أدخل مبلغ التسويق"}),s.budget&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.budget})]})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>n(!1),className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"إلغاء"}),e.jsx("button",{type:"submit",disabled:c,className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white rounded-lg",children:c?"جاري الحفظ...":"إضافة الحملة"})]})]})]})})}),x&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsx("div",{className:"bg-white rounded-lg max-w-4xl w-full max-h-screen overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["تعديل الحملة: ",x.name]}),e.jsx("button",{onClick:()=>i(null),className:"text-gray-400 hover:text-gray-600",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("form",{onSubmit:L,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"تاريخ البداية"}),e.jsx("input",{type:"date",value:r.start_date,onChange:t=>a("start_date",t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0}),s.start_date&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.start_date})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"تاريخ النهاية"}),e.jsx("input",{type:"date",value:r.end_date,onChange:t=>a("end_date",t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",min:r.start_date,required:!0}),s.end_date&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.end_date})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"منصة التسويق"}),e.jsx("select",{value:r.marketing_type_key,onChange:t=>a("marketing_type_key",t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:g.map(t=>e.jsx("option",{value:t.key,children:t.name_ar},t.key))}),s.marketing_type_key&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.marketing_type_key})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"مبلغ التسويق (IQD)"}),e.jsx("input",{type:"number",value:r.budget,onChange:t=>a("budget",t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",min:"0",step:"0.01",required:!0,placeholder:"أدخل مبلغ التسويق"}),s.budget&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.budget})]})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>i(null),className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"إلغاء"}),e.jsx("button",{type:"submit",disabled:c,className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white rounded-lg",children:c?"جاري الحفظ...":"حفظ التغييرات"})]})]})]})})})]})}export{z as default};
