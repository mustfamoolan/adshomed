import{r as d,u as m,j as e,H as ae,a as u}from"./app-CX5FMW1s.js";import{A as le}from"./AdminLayout-Bv6JVXqp.js";function ie({customer:s,notes:g,activities:p=[],requests:h,subscriptions:b=[],availableSubscriptionPlans:_=[],projects:re,clientProjects:T,statusOptions:w,customerTypeOptions:H,projectTypeOptions:G,subscriptionStatusOptions:S={}}){const[l,z]=d.useState("details"),[C,j]=d.useState(!1),[k,D]=d.useState(!1),[J,i]=d.useState(!1),[$,y]=d.useState(!1),{data:F,setData:c,post:K,processing:I,errors:E}=m({content:"",is_important:!1}),{data:f,setData:N,processing:L,errors:o}=m({type:"",description:"",client_project_id:"",status:"pending"}),{data:M,setData:O,patch:P,processing:R,errors:U}=m({download_id:s.download_id||""}),{data:n,setData:r,post:Q,processing:q,errors:x}=m({project_subscription_plan_id:"",activation_code:"",status:"pending",started_at:"",expires_at:"",notes:""}),V=t=>{t.preventDefault(),K(route("admin.customers.notes.store",s.id),{onSuccess:()=>{c("content",""),c("is_important",!1),j(!1)}})},W=t=>{t.preventDefault(),P(route("admin.customers.update-download-id",s.id),{onSuccess:()=>{i(!1)}})},X=t=>{t.preventDefault(),Q(route("admin.customers.subscriptions.store",s.id),{onSuccess:()=>{r({project_subscription_plan_id:"",activation_code:"",status:"pending",started_at:"",expires_at:"",notes:""}),y(!1)}})},Y=(t,a)=>{u.patch(route("admin.customers.subscriptions.update-status",[s.id,t]),{status:a})},Z=t=>{u.patch(route("admin.customers.update",s.id),{status:t})},A=()=>{u.post(route("admin.customers.generate-activation",s.id))},ee=t=>{const a={service_request:"bg-purple-100 text-purple-800",our_project_client:"bg-blue-100 text-blue-800",client_project_owner:"bg-green-100 text-green-800"};return e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${a[t]||"bg-gray-100 text-gray-800"}`,children:H[t]||t})},te=t=>{if(!t)return null;const a={sale:"bg-orange-100 text-orange-800",subscription:"bg-indigo-100 text-indigo-800",download:"bg-cyan-100 text-cyan-800"};return e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${a[t]||"bg-gray-100 text-gray-800"}`,children:G[t]||t})},B=t=>{const a={potential_buyer:"bg-yellow-100 text-yellow-800",subscriber:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800",bad:"bg-red-100 text-red-800",service_request:"bg-blue-100 text-blue-800",service_completed:"bg-purple-100 text-purple-800"};return e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${a[t]||"bg-gray-100 text-gray-800"}`,children:w[t]||t})},se=t=>{const a={pending:"bg-yellow-100 text-yellow-800",in_progress:"bg-blue-100 text-blue-800",completed:"bg-green-100 text-green-800",cancelled:"bg-red-100 text-red-800"},v={pending:"في الانتظار",in_progress:"قيد التنفيذ",completed:"مكتمل",cancelled:"ملغي"};return e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${a[t]||"bg-gray-100 text-gray-800"}`,children:v[t]||t})};return e.jsxs(le,{title:`عميل: ${s.name}`,children:[e.jsx(ae,{title:`عميل: ${s.name}`}),e.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-lg font-semibold text-blue-600",children:s.name.charAt(0)})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:s.name}),e.jsx("p",{className:"text-gray-600",children:s.phone})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[B(s.status),e.jsx("button",{onClick:()=>u.get(route("admin.customers.edit",s.id)),className:"px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 transition-colors",children:"تعديل"})]})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"تحديث سريع للحالة:"}),e.jsx("div",{className:"flex space-x-1",children:Object.entries(w).map(([t,a])=>e.jsx("button",{onClick:()=>Z(t),className:`px-3 py-1 text-xs font-medium rounded-full transition-colors ${s.status===t?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:a},t))})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200",children:[e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{className:"flex space-x-8 px-6",children:[{key:"details",label:"التفاصيل",count:null},{key:"notes",label:"الملاحظات",count:g.length},{key:"requests",label:"الطلبات",count:h.length},...s.customer_type==="our_project_client"&&s.subscription_type==="subscription"?[{key:"subscriptions",label:"الاشتراكات",count:b.length}]:[],{key:"activity",label:"النشاط",count:null}].map(t=>e.jsxs("button",{onClick:()=>z(t.key),className:`py-4 px-1 border-b-2 font-medium text-sm whitespace-nowrap ${l===t.key?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[t.label,t.count!==null&&e.jsx("span",{className:"mr-2 bg-gray-100 text-gray-600 py-0.5 px-2 rounded-full text-xs",children:t.count})]},t.key))})}),e.jsxs("div",{className:"p-6",children:[l==="details"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"معلومات العميل"}),e.jsxs("dl",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"الاسم"}),e.jsx("dd",{className:"text-sm text-gray-900",children:s.name})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"رقم الهاتف"}),e.jsx("dd",{className:"text-sm text-gray-900",children:s.phone})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"نوع العميل"}),e.jsx("dd",{className:"text-sm text-gray-900",children:ee(s.customer_type)})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"الحالة"}),e.jsx("dd",{className:"text-sm text-gray-900",children:B(s.status)})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"تاريخ التسجيل"}),e.jsx("dd",{className:"text-sm text-gray-900",children:new Date(s.created_at).toLocaleDateString("en-US")})]}),s.source&&e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"مصدر العميل"}),e.jsx("dd",{className:"text-sm text-gray-900",children:s.source})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"معلومات المشروع"}),e.jsxs("dl",{className:"space-y-3",children:[s.customer_type==="our_project_client"&&s.project&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"المشروع/البرنامج"}),e.jsx("dd",{className:"text-sm text-gray-900",children:s.project.name})]}),s.subscription_type&&e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"نوع المشروع"}),e.jsx("dd",{className:"text-sm text-gray-900",children:te(s.subscription_type)})]})]}),s.customer_type==="client_project_owner"&&s.client_project&&e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"مشروع العميل"}),e.jsx("dd",{className:"text-sm text-gray-900",children:s.client_project.name})]}),s.customer_type==="service_request"&&e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"نوع الخدمة"}),e.jsx("dd",{className:"text-sm text-gray-900",children:"طلب خدمة عامة"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"معرفات التفعيل"}),e.jsxs("dl",{className:"space-y-3",children:[(s.subscription_type==="sale"||s.subscription_type==="subscription")&&e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"كود التفعيل"}),s.activation_code?e.jsxs("dd",{className:"text-sm text-gray-900 font-mono bg-gray-100 px-2 py-1 rounded flex items-center justify-between",children:[e.jsx("span",{children:s.activation_code}),e.jsx("button",{onClick:A,className:"text-blue-600 hover:text-blue-700 text-xs",title:"إنشاء كود جديد",children:"تجديد"})]}):e.jsx("dd",{children:e.jsx("button",{onClick:A,className:"px-3 py-1 bg-green-600 text-white text-xs font-medium rounded hover:bg-green-700 transition-colors",children:"إنشاء كود تفعيل"})})]}),s.subscription_type==="download"&&e.jsxs("div",{children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"معرف التحميل"}),s.download_id?e.jsxs("dd",{className:"text-sm text-gray-900 font-mono bg-gray-100 px-2 py-1 rounded flex items-center justify-between",children:[e.jsx("span",{children:s.download_id}),e.jsx("button",{onClick:()=>i(!0),className:"text-blue-600 hover:text-blue-700 text-xs",title:"تعديل معرف التحميل",children:"تعديل"})]}):e.jsx("dd",{children:e.jsx("button",{onClick:()=>i(!0),className:"px-3 py-1 bg-blue-600 text-white text-xs font-medium rounded hover:bg-blue-700 transition-colors",children:"إضافة معرف التحميل"})})]})]})]})]}),J&&e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"تحديث معرف التحميل"}),e.jsxs("form",{onSubmit:W,className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("input",{type:"text",value:M.download_id,onChange:t=>O("download_id",t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"أدخل معرف التحميل"}),U.download_id&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:U.download_id})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{type:"submit",disabled:R,className:"px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded hover:bg-blue-700 disabled:bg-blue-400 transition-colors",children:R?"جاري الحفظ...":"حفظ"}),e.jsx("button",{type:"button",onClick:()=>i(!1),className:"px-4 py-2 bg-gray-300 text-gray-700 text-sm font-medium rounded hover:bg-gray-400 transition-colors",children:"إلغاء"})]})]})]})]}),l==="notes"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"ملاحظات العميل"}),e.jsx("button",{onClick:()=>j(!C),className:"px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 transition-colors",children:"إضافة ملاحظة"})]}),C&&e.jsx("form",{onSubmit:V,className:"bg-gray-50 p-4 rounded-lg",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الملاحظة"}),e.jsx("textarea",{value:F.content,onChange:t=>c("content",t.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"اكتب الملاحظة هنا..."}),E.content&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:E.content})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:F.is_important,onChange:t=>c("is_important",t.target.checked),className:"ml-2 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{className:"text-sm text-gray-700",children:"ملاحظة مهمة"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{type:"submit",disabled:I,className:"px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 disabled:bg-blue-400 transition-colors",children:I?"جاري الحفظ...":"حفظ الملاحظة"}),e.jsx("button",{type:"button",onClick:()=>j(!1),className:"px-4 py-2 text-gray-700 text-sm font-medium rounded-lg hover:bg-gray-100 transition-colors",children:"إلغاء"})]})]})}),e.jsx("div",{className:"space-y-3",children:g.length===0?e.jsx("p",{className:"text-gray-500 text-center py-8",children:"لا توجد ملاحظات للعميل"}):g.map(t=>e.jsx("div",{className:`p-4 rounded-lg border ${t.is_important?"border-yellow-200 bg-yellow-50":"border-gray-200 bg-white"}`,children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-gray-900",children:t.content}),e.jsxs("div",{className:"flex items-center mt-2 text-xs text-gray-500",children:[e.jsx("span",{children:t.user?.name||"نظام"}),e.jsx("span",{className:"mx-2",children:"•"}),e.jsx("span",{children:new Date(t.created_at).toLocaleString("en-US")}),t.is_important&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"mx-2",children:"•"}),e.jsx("span",{className:"text-yellow-600 font-medium",children:"مهم"})]})]})]})})},t.id))})]}),l==="subscriptions"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"اشتراكات العميل"}),_.length>0&&e.jsx("button",{onClick:()=>y(!$),className:"px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 transition-colors",children:"إضافة اشتراك"})]}),$&&e.jsxs("form",{onSubmit:X,className:"bg-gray-50 p-4 rounded-lg",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"باقة الاشتراك *"}),e.jsxs("select",{value:n.project_subscription_plan_id,onChange:t=>r("project_subscription_plan_id",t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"اختر باقة الاشتراك"}),_.map(t=>e.jsxs("option",{value:t.id,children:[t.plan_name," - ",t.price," ريال (",t.billing_cycle_label,")"]},t.id))]}),x.project_subscription_plan_id&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:x.project_subscription_plan_id})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"كود التفعيل (اختياري)"}),e.jsx("input",{type:"text",value:n.activation_code,onChange:t=>r("activation_code",t.target.value.toUpperCase()),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"أدخل كود التفعيل (اختياري)"}),x.activation_code&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:x.activation_code})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"تاريخ البداية"}),e.jsx("input",{type:"date",value:n.started_at,onChange:t=>r("started_at",t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"تاريخ الانتهاء"}),e.jsx("input",{type:"date",value:n.expires_at,onChange:t=>r("expires_at",t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ملاحظات"}),e.jsx("textarea",{value:n.notes,onChange:t=>r("notes",t.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"ملاحظات حول الاشتراك"})]})]}),e.jsxs("div",{className:"flex space-x-2 mt-4",children:[e.jsx("button",{type:"submit",disabled:q,className:"px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded hover:bg-blue-700 disabled:bg-blue-400 transition-colors",children:q?"جاري الحفظ...":"إضافة الاشتراك"}),e.jsx("button",{type:"button",onClick:()=>y(!1),className:"px-4 py-2 bg-gray-300 text-gray-700 text-sm font-medium rounded hover:bg-gray-400 transition-colors",children:"إلغاء"})]})]}),e.jsx("div",{className:"space-y-3",children:b.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500",children:"لا توجد اشتراكات للعميل"}):b.map(t=>e.jsx("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:t.subscription_plan?.plan_name}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${t.status==="active"?"bg-green-100 text-green-800":t.status==="expired"?"bg-red-100 text-red-800":t.status==="cancelled"?"bg-gray-100 text-gray-800":"bg-yellow-100 text-yellow-800"}`,children:S[t.status]||t.status})]}),e.jsxs("div",{className:"mt-1 text-sm text-gray-600",children:[t.activation_code&&e.jsxs("p",{children:["كود التفعيل: ",e.jsx("span",{className:"font-mono bg-gray-100 px-1 rounded",children:t.activation_code})]}),t.started_at&&e.jsxs("p",{children:["تاريخ البداية: ",new Date(t.started_at).toLocaleDateString("en-US")]}),t.expires_at&&e.jsxs("p",{children:["تاريخ الانتهاء: ",new Date(t.expires_at).toLocaleDateString("en-US")]})]})]}),e.jsx("div",{className:"flex space-x-2",children:Object.entries(S).map(([a,v])=>e.jsx("button",{onClick:()=>Y(t.id,a),className:`px-3 py-1 text-xs font-medium rounded transition-colors ${t.status===a?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:v},a))})]})},t.id))})]}),l==="requests"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"طلبات العميل"}),e.jsx("button",{onClick:()=>D(!k),className:"px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 transition-colors",children:"إضافة طلب"})]}),k&&e.jsx("form",{onSubmit:handleRequestSubmit,className:"bg-gray-50 p-4 rounded-lg",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"نوع الطلب"}),e.jsxs("select",{value:f.type,onChange:t=>N("type",t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"اختر نوع الطلب"}),e.jsx("option",{value:"service",children:"طلب خدمة"}),e.jsx("option",{value:"support",children:"طلب دعم"}),e.jsx("option",{value:"consultation",children:"استشارة"}),e.jsx("option",{value:"complaint",children:"شكوى"}),e.jsx("option",{value:"other",children:"أخرى"})]}),o.type&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:o.type})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"مشروع العميل"}),e.jsxs("select",{value:f.client_project_id,onChange:t=>N("client_project_id",t.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"اختر المشروع"}),T.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"وصف الطلب"}),e.jsx("textarea",{value:f.description,onChange:t=>N("description",t.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"اكتب تفاصيل الطلب..."}),o.description&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:o.description})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{type:"submit",disabled:L,className:"px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 disabled:bg-blue-400 transition-colors",children:L?"جاري الحفظ...":"حفظ الطلب"}),e.jsx("button",{type:"button",onClick:()=>D(!1),className:"px-4 py-2 text-gray-700 text-sm font-medium rounded-lg hover:bg-gray-100 transition-colors",children:"إلغاء"})]})]})}),e.jsx("div",{className:"space-y-3",children:h.length===0?e.jsx("p",{className:"text-gray-500 text-center py-8",children:"لا توجد طلبات للعميل"}):h.map(t=>e.jsx("div",{className:"p-4 rounded-lg border border-gray-200 bg-white",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:t.type}),se(t.status)]}),e.jsx("p",{className:"text-gray-700 mb-2",children:t.description}),t.client_project&&e.jsxs("p",{className:"text-sm text-gray-500 mb-2",children:["المشروع: ",t.client_project.name]}),e.jsx("div",{className:"text-xs text-gray-500",children:new Date(t.created_at).toLocaleString("en-US")})]})})},t.id))})]}),l==="activity"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"نشاط العميل"}),p&&p.length>0?e.jsx("div",{className:"space-y-3",children:p.map(t=>e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg border",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:t.title}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:t.description}),e.jsxs("div",{className:"flex items-center mt-2 text-xs text-gray-500",children:[e.jsxs("span",{children:["بواسطة: ",t.user?.name||"النظام"]}),e.jsx("span",{className:"mx-2",children:"•"}),e.jsx("span",{children:new Date(t.created_at).toLocaleDateString("ar-EG",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})})]})]}),e.jsx("div",{className:"flex items-center text-xs",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${t.type==="subscription_added"?"bg-green-100 text-green-800":t.type==="subscription_status_changed"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:t.type==="subscription_added"?"إضافة اشتراك":t.type==="subscription_status_changed"?"تغيير حالة اشتراك":t.type==="customer_type_changed"?"تغيير نوع العميل":t.type==="status_changed"?"تغيير حالة العميل":t.type})})]})},t.id))}):e.jsx("div",{className:"text-gray-500 text-center py-8",children:"لا توجد أنشطة مسجلة لهذا العميل"})]})]})]})]})]})}export{ie as default};
