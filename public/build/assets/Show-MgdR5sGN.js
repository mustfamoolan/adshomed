import{r as x,u as z,j as e,H as ce,L as A,a as N}from"./app-CX5FMW1s.js";import{A as me}from"./AdminLayout-Bv6JVXqp.js";const oe={planning:"bg-yellow-100 text-yellow-800",active:"bg-green-100 text-green-800",completed:"bg-blue-100 text-blue-800",paused:"bg-orange-100 text-orange-800",cancelled:"bg-red-100 text-red-800"},xe={planning:"تخطيط",active:"نشط",completed:"مكتمل",paused:"متوقف",cancelled:"ملغي"},ue={sales:"مبيعات",subscription:"اشتراكات",free:"مجاني",downloads:"تحميلات"},ge={web:"موقع ويب",android:"أندرويد",ios:"آيفون",desktop:"سطح المكتب",facebook:"فيسبوك",instagram:"إنستغرام",youtube:"يوتيوب",telegram:"تيليجرام",whatsapp:"واتساب",other:"أخرى"},P={development:"تطوير",design:"تصميم",marketing:"تسويق",hosting:"استضافة",tools:"أدوات",other:"أخرى"};function pe({project:t,expensesByCategory:j,recentExpenses:w,recentBudgets:k,marketingTypes:i}){const[B,_]=x.useState(!1),[H,S]=x.useState(!1),[$,b]=x.useState(!1),[p,C]=x.useState(""),[I,u]=x.useState(!1),E=s=>{const a=i?.find(d=>d.key===s);return a?a.name_ar:P[s]||s},{data:R,setData:q,post:F,processing:O,errors:f,reset:V}=z({amount:"",description:""}),{data:l,setData:c,post:W,processing:U,errors:n}=z({title:"",amount:"",description:"",category:"development",expense_date:new Date().toISOString().split("T")[0]});x.useEffect(()=>{l&&l.category&&i?.some(s=>s.key===l.category)?u(!0):u(!1)},[i,l.category]);const Q=()=>{c({title:"",amount:"",description:"",category:"development",expense_date:new Date().toISOString().split("T")[0]}),u(!1)},{data:D,setData:L,post:G,processing:J,errors:m,reset:K}=z({platform:"",downloads_count:"",revenue:""}),X=()=>{N.patch(`/admin/projects/${t.id}/quick-sale`,{},{preserveScroll:!0,onSuccess:()=>{}})},Y=()=>{C(""),b(!0)},Z=()=>{const s=p?{plan_id:p}:{};N.patch(`/admin/projects/${t.id}/quick-subscriber`,s,{preserveScroll:!0,onSuccess:()=>{b(!1),C("")}})},T=s=>{s.preventDefault(),G(route("admin.projects.platform-stats",t.id),{onSuccess:()=>{K()}})},ee=s=>{if(console.log("Category changed to:",s),console.log("Available marketing types:",i),s==="marketing"){if(u(!0),i?.length>0){const a=i[0].key;console.log("Setting category to first marketing type:",a),c("category",a)}}else u(!1),c("category",s)},se=s=>{s.preventDefault(),F(route("admin.projects.budgets.store",t.id),{onSuccess:()=>{V(),_(!1)}})},te=s=>{s.preventDefault(),W(route("admin.projects.expenses.store",t.id),{onSuccess:()=>{Q(),S(!1)}})},ae=s=>{confirm("هل أنت متأكد من حذف هذا المصروف؟")&&N.delete(route("admin.projects.expenses.destroy",[t.id,s]),{preserveScroll:!0,onSuccess:()=>{}})},re=s=>{confirm("هل أنت متأكد من حذف هذه الميزانية؟")&&N.delete(route("admin.projects.budgets.destroy",[t.id,s]),{preserveScroll:!0,onSuccess:()=>{}})},r=s=>{const a=Number(s)||0;return new Intl.NumberFormat("en-US",{style:"currency",currency:"IQD",minimumFractionDigits:0,maximumFractionDigits:0}).format(a)},y=s=>{let a=0;switch(s.type){case"sales":a=(Number(s.product_price)||0)*(Number(s.sales_count)||0);break;case"subscription":s.subscription_plans&&s.subscription_plans.length>0?a=s.subscription_plans.reduce((d,o)=>{const de=Number(o.price)||0,ie=Number(o.subscriber_count)||0,ne=o.billing_cycle==="yearly"?12:(o.billing_cycle==="lifetime",1);return d+de*ie*ne},0):a=Number(s.calculated_revenue)||Number(s.total_revenue)||0;break;case"downloads":s.platform_stats&&s.platform_stats.length>0?a=s.platform_stats.reduce((d,o)=>d+(Number(o.revenue)||0),0):a=Number(s.total_revenue)||0;break;case"free":default:a=0}return Number(a)||0},le=s=>s.type!=="subscription"||!s.subscription_plans?0:s.subscription_plans.reduce((a,d)=>a+(d.subscriber_count||0),0),g=s=>s.expenses?s.expenses.reduce((a,d)=>a+(Number(d.amount)||0),0):0,v=s=>s.calculated_total_budget||s.total_budget||s.initial_budget||0,M=s=>{const a=y(s)||0,d=g(s);return a-d},h=s=>s?new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"غير محدد";return e.jsxs(me,{children:[e.jsx(ce,{title:`مشروع: ${t.name}`}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:t.name}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${oe[t.status]}`,children:xe[t.status]}),e.jsxs("span",{className:"text-sm text-gray-600",children:["نوع المشروع: ",ue[t.type]]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[t.type==="sales"&&e.jsxs("button",{onClick:X,className:"inline-flex items-center px-3 py-2 bg-green-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-green-700 focus:bg-green-700 active:bg-green-900 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 transition ease-in-out duration-150",children:[e.jsx("svg",{className:"ml-1 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"إضافة مبيعة"]}),t.type==="subscription"&&e.jsxs("button",{onClick:Y,className:"inline-flex items-center px-3 py-2 bg-indigo-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-indigo-700 focus:bg-indigo-700 active:bg-indigo-900 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition ease-in-out duration-150",children:[e.jsx("svg",{className:"ml-1 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),"إضافة مشترك"]}),e.jsxs(A,{href:route("admin.campaigns.show",t.id),className:"inline-flex items-center px-3 py-2 bg-purple-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-purple-700 focus:bg-purple-700 active:bg-purple-900 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2 transition ease-in-out duration-150",children:[e.jsx("svg",{className:"ml-1 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5.882V19.24a1.76 1.76 0 01-3.417.592l-2.147-6.15M18 13a3 3 0 100-6M5.436 13.683A4.001 4.001 0 017 6h1.832c4.1 0 7.625-1.234 9.168-3v14c-1.543-1.766-5.067-3-9.168-3H7a3.988 3.988 0 01-1.564-.317z"})}),"إدارة الحملات"]}),e.jsx(A,{href:route("admin.projects.edit",t.id),className:"inline-flex items-center px-4 py-2 bg-blue-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-blue-700 focus:bg-blue-700 active:bg-blue-900 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition ease-in-out duration-150",children:"تعديل"}),e.jsx(A,{href:route("admin.projects.index"),className:"inline-flex items-center px-4 py-2 bg-gray-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-gray-700 focus:bg-gray-700 active:bg-gray-900 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition ease-in-out duration-150",children:"العودة"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6",children:[e.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:e.jsx("div",{className:"p-5",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-8 h-8 bg-green-500 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-5 h-5 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M4 4a2 2 0 00-2 2v4a2 2 0 002 2V6h10a2 2 0 00-2-2H4zm2 6a2 2 0 012-2h8a2 2 0 012 2v4a2 2 0 01-2 2H8a2 2 0 01-2-2v-4zm6 4a2 2 0 100-4 2 2 0 000 4z",clipRule:"evenodd"})})})}),e.jsxs("div",{className:"mr-5 w-0 flex-1",children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"إجمالي الميزانية"}),e.jsx("dd",{className:"text-lg font-medium text-gray-900",children:r(v(t))}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"المضافة عند الإنشاء + المضافة لاحقاً"})]})]})})}),e.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:e.jsx("div",{className:"p-5",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-8 h-8 bg-red-500 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-5 h-5 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z",clipRule:"evenodd"})})})}),e.jsxs("div",{className:"mr-5 w-0 flex-1",children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"إجمالي المصروفات"}),e.jsx("dd",{className:"text-lg font-medium text-gray-900",children:r(g(t))}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"جميع المصروفات المضافة"})]})]})})}),e.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:e.jsx("div",{className:"p-5",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center",children:e.jsx("svg",{className:"w-5 h-5 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M12 7a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0V8.414l-4.293 4.293a1 1 0 01-1.414 0L8 10.414l-4.293 4.293a1 1 0 01-1.414-1.414l5-5a1 1 0 011.414 0L11 10.586 14.586 7H12z",clipRule:"evenodd"})})})}),e.jsxs("div",{className:"mr-5 w-0 flex-1",children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"إجمالي الإيرادات"}),e.jsx("dd",{className:"text-lg font-medium text-gray-900",children:r(y(t))}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"حسب نوع المشروع والأسعار"})]})]})})}),e.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:e.jsx("div",{className:"p-5",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${M(t)>=0?"bg-green-500":"bg-red-500"}`,children:e.jsx("svg",{className:"w-5 h-5 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-8.293l-3-3a1 1 0 00-1.414 0l-3 3a1 1 0 001.414 1.414L9 9.414V13a1 1 0 102 0V9.414l1.293 1.293a1 1 0 001.414-1.414z",clipRule:"evenodd"})})})}),e.jsxs("div",{className:"mr-5 w-0 flex-1",children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"صافي الربح"}),e.jsx("dd",{className:`text-lg font-medium ${M(t)>=0?"text-green-600":"text-red-600"}`,children:r(M(t))}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"الإيرادات - المصروفات"})]})]})})}),e.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:e.jsx("div",{className:"p-5",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${v(t)-g(t)>=0?"bg-blue-500":"bg-orange-500"}`,children:e.jsx("svg",{className:"w-5 h-5 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z",clipRule:"evenodd"})})})}),e.jsxs("div",{className:"mr-5 w-0 flex-1",children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"الميزانية المتبقية"}),e.jsx("dd",{className:`text-lg font-medium ${v(t)-g(t)>=0?"text-blue-600":"text-orange-600"}`,children:r(v(t)-g(t))}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"الميزانية - المصروفات"})]})]})})})]}),(t.type==="sales"||t.type==="subscription"||t.type==="downloads")&&e.jsxs("div",{className:"bg-white shadow overflow-hidden sm:rounded-lg",children:[e.jsx("div",{className:"px-4 py-5 sm:px-6",children:e.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"معلومات التسعير والإيرادات"})}),e.jsxs("div",{className:"border-t border-gray-200 px-4 py-5 sm:p-0",children:[t.type==="sales"&&e.jsxs("dl",{className:"sm:divide-y sm:divide-gray-200",children:[e.jsxs("div",{className:"py-4 sm:py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6",children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"سعر المنتج"}),e.jsx("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2 font-semibold",children:r(t.product_price||0)})]}),e.jsxs("div",{className:"py-4 sm:py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6",children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"عدد المبيعات"}),e.jsxs("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2 font-semibold",children:[t.sales_count||0," مبيعة"]})]}),e.jsxs("div",{className:"py-4 sm:py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6",children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"إجمالي إيرادات المبيعات"}),e.jsx("dd",{className:"mt-1 text-sm text-green-600 sm:mt-0 sm:col-span-2 font-bold text-lg",children:r(y(t))})]})]}),t.type==="subscription"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("dl",{className:"sm:divide-y sm:divide-gray-200",children:[e.jsxs("div",{className:"py-4 sm:py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6",children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"إجمالي المشتركين"}),e.jsxs("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2 font-semibold",children:[le(t)," مشترك"]})]}),e.jsxs("div",{className:"py-4 sm:py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6",children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"إيرادات الاشتراكات الشهرية"}),e.jsx("dd",{className:"mt-1 text-sm text-green-600 sm:mt-0 sm:col-span-2 font-bold text-lg",children:r(y(t))})]})]}),t.subscription_plans&&t.subscription_plans.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-md font-medium text-gray-900 mb-4 px-6",children:"باقات الاشتراك:"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 px-6 pb-6",children:t.subscription_plans.map((s,a)=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 bg-gray-50",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 mb-2",children:s.name}),e.jsxs("div",{className:"text-xs text-gray-600 mb-1",children:["السعر: ",r(s.price)]}),e.jsxs("div",{className:"text-xs text-gray-600 mb-1",children:["نوع الدفع: ",s.billing_cycle==="monthly"?"شهري":s.billing_cycle==="yearly"?"سنوي":"مدى الحياة"]}),e.jsxs("div",{className:"text-xs text-gray-600 mb-2",children:["المشتركين: ",s.subscriber_count||0]}),e.jsxs("div",{className:"text-sm font-semibold text-green-600",children:["إيرادات شهرية: ",r((s.price||0)*(s.subscriber_count||0)*(s.billing_cycle==="yearly"?12:(s.billing_cycle==="lifetime",1)))]})]},a))})]})]}),t.type==="downloads"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("dl",{className:"sm:divide-y sm:divide-gray-200",children:[e.jsxs("div",{className:"py-4 sm:py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6",children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"إجمالي التحميلات"}),e.jsxs("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2 font-semibold",children:[t.platform_stats?t.platform_stats.reduce((s,a)=>s+(a.downloads_count||0),0):t.downloads_count||0," تحميل"]})]}),e.jsxs("div",{className:"py-4 sm:py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6",children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"إجمالي الإيرادات"}),e.jsx("dd",{className:"mt-1 text-sm text-green-600 sm:mt-0 sm:col-span-2 font-bold text-lg",children:r(t.platform_stats?t.platform_stats.reduce((s,a)=>s+(a.revenue||0),0):t.total_revenue||0)})]})]}),t.platform_stats&&t.platform_stats.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-md font-medium text-gray-900 mb-4 px-6",children:"إحصائيات المنصات:"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 px-6 pb-6",children:t.platform_stats.map((s,a)=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 bg-gray-50",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 mb-2",children:s.platform}),e.jsxs("div",{className:"text-xs text-gray-600 mb-1",children:["التحميلات: ",s.downloads_count||0]}),e.jsxs("div",{className:"text-sm font-semibold text-green-600",children:["الإيرادات: ",r(s.revenue||0)]})]},a))})]}),e.jsxs("div",{className:"px-6 pb-6",children:[e.jsx("h4",{className:"text-md font-medium text-gray-900 mb-4",children:"إضافة إحصائيات منصة:"}),e.jsxs("form",{onSubmit:T,className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"المنصة"}),e.jsxs("select",{value:D.platform,onChange:s=>L("platform",s.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm",required:!0,children:[e.jsx("option",{value:"",children:"اختر المنصة"}),t.platforms&&t.platforms.map((s,a)=>e.jsx("option",{value:s.platform,children:s.platform},a))]}),m.platform&&e.jsx("div",{className:"text-red-600 text-xs mt-1",children:m.platform})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"عدد التحميلات"}),e.jsx("input",{type:"number",value:D.downloads_count,onChange:s=>L("downloads_count",s.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm",min:"1",required:!0}),m.downloads_count&&e.jsx("div",{className:"text-red-600 text-xs mt-1",children:m.downloads_count})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"الإيرادات (اختياري)"}),e.jsx("input",{type:"number",step:"0.01",value:D.revenue,onChange:s=>L("revenue",s.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm",min:"0",placeholder:"0.00"}),m.revenue&&e.jsx("div",{className:"text-red-600 text-xs mt-1",children:m.revenue})]}),e.jsx("div",{className:"flex items-end",children:e.jsx("button",{type:"submit",disabled:J,className:"w-full inline-flex justify-center items-center px-4 py-2 bg-blue-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-blue-700 focus:bg-blue-700 active:bg-blue-900 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition ease-in-out duration-150",children:"إضافة"})})]})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white shadow overflow-hidden sm:rounded-lg",children:[e.jsx("div",{className:"px-4 py-5 sm:px-6",children:e.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"معلومات المشروع"})}),e.jsx("div",{className:"border-t border-gray-200 px-4 py-5 sm:p-0",children:e.jsxs("dl",{className:"sm:divide-y sm:divide-gray-200",children:[e.jsxs("div",{className:"py-4 sm:py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6",children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"اسم المشروع"}),e.jsx("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2",children:t.name})]}),e.jsxs("div",{className:"py-4 sm:py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6",children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"الوصف"}),e.jsx("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2",children:t.description||"لا يوجد وصف"})]}),e.jsxs("div",{className:"py-4 sm:py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6",children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"مدير المشروع"}),e.jsx("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2",children:t.manager?.name})]}),e.jsxs("div",{className:"py-4 sm:py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6",children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"تاريخ بداية التطوير"}),e.jsx("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2",children:h(t.development_start_date)})]}),e.jsxs("div",{className:"py-4 sm:py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6",children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"تاريخ انتهاء التطوير"}),e.jsx("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2",children:h(t.development_end_date)})]}),e.jsxs("div",{className:"py-4 sm:py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6",children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"تاريخ النشر"}),e.jsx("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2",children:h(t.publication_date)})]}),e.jsxs("div",{className:"py-4 sm:py-5 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6",children:[e.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"حالة النشر"}),e.jsx("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2",children:e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${t.publication_status==="published"?"bg-green-100 text-green-800":t.publication_status==="unpublished"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:t.publication_status==="published"?"منشور":t.publication_status==="unpublished"?"مغلق":"لم يعرض"})})]})]})})]}),e.jsxs("div",{className:"bg-white shadow overflow-hidden sm:rounded-lg",children:[e.jsx("div",{className:"px-4 py-5 sm:px-6",children:e.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"المنصات"})}),e.jsx("div",{className:"border-t border-gray-200",children:e.jsx("div",{className:"px-4 py-5 sm:p-6",children:t.platforms&&t.platforms.length>0?e.jsx("div",{className:"space-y-3",children:t.platforms.map((s,a)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-900",children:ge[s.platform]}),s.platform_url&&e.jsx("a",{href:s.platform_url,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 hover:text-blue-500",children:"رابط المنصة"})]},a))}):e.jsx("p",{className:"text-sm text-gray-500",children:"لا توجد منصات مضافة"})})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white shadow overflow-hidden sm:rounded-lg",children:[e.jsxs("div",{className:"px-4 py-5 sm:px-6 flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"إدارة الميزانية"}),e.jsx("button",{onClick:()=>_(!B),className:"inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:"إضافة ميزانية"})]}),B&&e.jsx("div",{className:"border-t border-gray-200 px-4 py-5 sm:p-6",children:e.jsxs("form",{onSubmit:se,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"المبلغ"}),e.jsx("input",{type:"number",step:"0.01",value:R.amount,onChange:s=>q("amount",s.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",placeholder:"0.00",required:!0}),f.amount&&e.jsx("div",{className:"text-red-500 text-sm mt-1",children:f.amount})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"الوصف"}),e.jsx("input",{type:"text",value:R.description,onChange:s=>q("description",s.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500"}),f.description&&e.jsx("div",{className:"text-red-500 text-sm mt-1",children:f.description})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"submit",disabled:O,className:"inline-flex items-center px-4 py-2 bg-green-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-green-700 focus:bg-green-700 active:bg-green-900 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 transition ease-in-out duration-150",children:"إضافة"}),e.jsx("button",{type:"button",onClick:()=>_(!1),className:"inline-flex items-center px-4 py-2 bg-gray-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-gray-700 focus:bg-gray-700 active:bg-gray-900 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition ease-in-out duration-150",children:"إلغاء"})]})]})}),e.jsx("div",{className:"border-t border-gray-200",children:e.jsx("div",{className:"px-4 py-5 sm:p-6",children:k&&k.length>0?e.jsx("div",{className:"space-y-3",children:k.map(s=>e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:r(s.amount)}),e.jsx("p",{className:"text-xs text-gray-500",children:s.description}),e.jsxs("p",{className:"text-xs text-gray-400",children:["بواسطة: ",s.added_by?.name]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"text-xs text-gray-500",children:h(s.created_at)}),e.jsx("button",{onClick:()=>re(s.id),className:"text-red-600 hover:text-red-800 text-xs px-2 py-1 rounded border border-red-300 hover:bg-red-50",title:"حذف الميزانية",children:"حذف"})]})]},s.id))}):e.jsx("p",{className:"text-sm text-gray-500",children:"لا توجد ميزانيات مضافة"})})})]}),e.jsxs("div",{className:"bg-white shadow overflow-hidden sm:rounded-lg",children:[e.jsxs("div",{className:"px-4 py-5 sm:px-6 flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"إدارة المصروفات"}),e.jsx("button",{onClick:()=>S(!H),className:"inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:"إضافة مصروف"})]}),H&&e.jsx("div",{className:"border-t border-gray-200 px-4 py-5 sm:p-6",children:e.jsxs("form",{onSubmit:te,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"عنوان المصروف"}),e.jsx("input",{type:"text",value:l.title,onChange:s=>c("title",s.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",placeholder:"مثال: شراء استضافة",required:!0}),n.title&&e.jsx("div",{className:"text-red-500 text-sm mt-1",children:n.title})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"المبلغ"}),e.jsx("input",{type:"number",step:"0.01",value:l.amount,onChange:s=>c("amount",s.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",required:!0}),n.amount&&e.jsx("div",{className:"text-red-500 text-sm mt-1",children:n.amount})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"الفئة"}),e.jsx("select",{value:i?.some(s=>s.key===l.category)?"marketing":l.category,onChange:s=>ee(s.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",children:Object.entries(P).map(([s,a])=>e.jsx("option",{value:s,children:a},s))}),n.category&&e.jsx("div",{className:"text-red-500 text-sm mt-1",children:n.category})]}),I&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"نوع التسويق"}),e.jsx("select",{value:i?.some(s=>s.key===l.category)?l.category:i?.[0]?.key||"",onChange:s=>c("category",s.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",children:i?.map(s=>e.jsx("option",{value:s.key,children:s.name_ar},s.key))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"الوصف"}),e.jsx("input",{type:"text",value:l.description,onChange:s=>c("description",s.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",placeholder:"تفاصيل إضافية اختيارية"}),n.description&&e.jsx("div",{className:"text-red-500 text-sm mt-1",children:n.description})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"تاريخ المصروف"}),e.jsx("input",{type:"date",value:l.expense_date,onChange:s=>c("expense_date",s.target.value),className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500",required:!0}),n.expense_date&&e.jsx("div",{className:"text-red-500 text-sm mt-1",children:n.expense_date})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"submit",disabled:U,className:"inline-flex items-center px-4 py-2 bg-red-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-red-700 focus:bg-red-700 active:bg-red-900 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 transition ease-in-out duration-150",children:"إضافة"}),e.jsx("button",{type:"button",onClick:()=>S(!1),className:"inline-flex items-center px-4 py-2 bg-gray-600 border border-transparent rounded-md font-semibold text-xs text-white uppercase tracking-widest hover:bg-gray-700 focus:bg-gray-700 active:bg-gray-900 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition ease-in-out duration-150",children:"إلغاء"})]})]})}),e.jsx("div",{className:"border-t border-gray-200",children:e.jsx("div",{className:"px-4 py-5 sm:p-6",children:w&&w.length>0?e.jsx("div",{className:"space-y-3",children:w.map(s=>e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:r(s.amount)}),e.jsx("p",{className:"text-xs text-gray-500",children:s.description}),e.jsxs("p",{className:"text-xs text-gray-400",children:[E(s.category)," - بواسطة: ",s.added_by?.name]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"text-xs text-gray-500",children:h(s.created_at)}),e.jsx("button",{onClick:()=>ae(s.id),className:"text-red-600 hover:text-red-800 text-xs px-2 py-1 rounded border border-red-300 hover:bg-red-50",title:"حذف المصروف",children:"حذف"})]})]},s.id))}):e.jsx("p",{className:"text-sm text-gray-500",children:"لا توجد مصروفات مضافة"})})})]})]}),j&&Object.keys(j).length>0&&e.jsxs("div",{className:"bg-white shadow overflow-hidden sm:rounded-lg",children:[e.jsx("div",{className:"px-4 py-5 sm:px-6",children:e.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"المصروفات حسب الفئة"})}),e.jsx("div",{className:"border-t border-gray-200 px-4 py-5 sm:p-6",children:e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:Object.entries(j).map(([s,a])=>e.jsxs("div",{className:"text-center p-4 border rounded-lg",children:[e.jsx("div",{className:"text-lg font-semibold text-gray-900",children:r(a)}),e.jsx("div",{className:"text-sm text-gray-500",children:E(s)})]},s))})})]})]}),$&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:e.jsxs("div",{className:"mt-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"إضافة مشترك جديد"}),e.jsx("button",{onClick:()=>b(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("p",{className:"text-sm text-gray-600 mb-3",children:["المشروع: ",e.jsx("span",{className:"font-medium",children:t.name})]}),t.subscription_plans&&t.subscription_plans.length>0?e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"اختر الباقة:"}),e.jsx("div",{className:"space-y-2",children:t.subscription_plans.map(s=>e.jsxs("label",{className:"flex items-center p-3 border rounded-lg hover:bg-gray-50 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"plan",value:s.id,checked:p==s.id,onChange:a=>C(a.target.value),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300"}),e.jsxs("div",{className:"ml-3 flex-1",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:s.name}),e.jsx("span",{className:"text-sm text-gray-600",children:r(s.price)})]}),e.jsxs("div",{className:"flex justify-between items-center mt-1",children:[e.jsx("span",{className:"text-xs text-gray-500",children:s.billing_cycle==="monthly"?"شهري":s.billing_cycle==="yearly"?"سنوي":"مدى الحياة"}),e.jsxs("span",{className:"text-xs text-gray-500",children:["المشتركين: ",s.subscriber_count||0]})]})]})]},s.id))})]}):e.jsx("div",{className:"text-center py-4",children:e.jsx("p",{className:"text-gray-500",children:"لا توجد باقات اشتراك لهذا المشروع"})})]}),e.jsxs("div",{className:"flex justify-end space-x-2 space-x-reverse",children:[e.jsx("button",{onClick:()=>b(!1),className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-gray-500",children:"إلغاء"}),e.jsx("button",{onClick:Z,disabled:t.subscription_plans&&t.subscription_plans.length>0&&!p,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:"إضافة مشترك"})]})]})})})]})}export{pe as default};
