import{r as k,j as e,H as L,L as i,a as _}from"./app-CX5FMW1s.js";import{A as C}from"./AdminLayout-Bv6JVXqp.js";function W({projects:a}){const[d,h]=k.useState(""),t=s=>new Intl.NumberFormat("en-US",{style:"currency",currency:"IQD",minimumFractionDigits:0,maximumFractionDigits:0}).format(s||0),u=s=>{switch(s){case"pending":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"in_progress":return"bg-blue-100 text-blue-800 border-blue-200";case"completed":return"bg-green-100 text-green-800 border-green-200";case"cancelled":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},g=s=>{switch(s){case"unpaid":return"bg-red-100 text-red-800 border-red-200";case"partial":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"paid":return"bg-green-100 text-green-800 border-green-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},f=s=>{switch(s){case"pending":return"قيد الانتظار";case"in_progress":return"قيد التنفيذ";case"completed":return"مكتمل";case"cancelled":return"ملغي";default:return"غير محدد"}},j=s=>{switch(s){case"unpaid":return"غير مدفوع";case"partial":return"مدفوع جزئياً";case"paid":return"مدفوع بالكامل";default:return"غير محدد"}},m=a.data.filter(s=>s.name.toLowerCase().includes(d.toLowerCase())||s.client_name.toLowerCase().includes(d.toLowerCase())),v=s=>{confirm("هل أنت متأكد من حذف هذا المشروع؟")&&_.delete(route("admin.client-projects.destroy",s))},b=a.data.length,p=a.data.filter(s=>s.status==="completed").length,N=a.data.filter(s=>s.status==="in_progress").length,x=a.data.reduce((s,r)=>s+parseFloat(r.project_value||0),0),o=a.data.reduce((s,r)=>s+parseFloat(r.paid_amount||0),0),c=a.data.reduce((s,r)=>{const n=r.development_costs?.reduce((y,w)=>y+parseFloat(w.amount||0),0)||0;return s+n},0),l=o-c;return e.jsxs(C,{title:"مشاريع العملاء",children:[e.jsx(L,{title:"مشاريع العملاء"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"مشاريع العملاء"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"إدارة وتتبع مشاريع العملاء الخارجيين"})]}),e.jsxs(i,{href:route("admin.client-projects.create"),className:"inline-flex items-center px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-colors duration-200",children:[e.jsx("svg",{className:"w-5 h-5 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"إضافة مشروع جديد"]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4 overflow-hidden",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg flex-shrink-0",children:e.jsx("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),e.jsxs("div",{className:"mr-4 min-w-0 flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 truncate",children:"إجمالي المشاريع"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:b.toLocaleString("en-US")})]})]})}),e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4 overflow-hidden",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg flex-shrink-0",children:e.jsx("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsxs("div",{className:"mr-4 min-w-0 flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 truncate",children:"مشاريع مكتملة"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:p.toLocaleString("en-US")})]})]})}),e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4 overflow-hidden",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-yellow-100 rounded-lg flex-shrink-0",children:e.jsx("svg",{className:"w-6 h-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsxs("div",{className:"mr-4 min-w-0 flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 truncate",children:"قيد التنفيذ"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:N.toLocaleString("en-US")})]})]})}),e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4 overflow-hidden",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-purple-100 rounded-lg flex-shrink-0",children:e.jsx("svg",{className:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})})}),e.jsxs("div",{className:"mr-4 min-w-0 flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 truncate",children:"إجمالي القيمة"}),e.jsx("p",{className:"text-lg font-bold text-gray-900 truncate",title:t(x),children:t(x)})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4 overflow-hidden",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-emerald-100 rounded-lg flex-shrink-0",children:e.jsx("svg",{className:"w-6 h-6 text-emerald-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})})}),e.jsxs("div",{className:"mr-4 min-w-0 flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 truncate",children:"إجمالي المدفوع"}),e.jsx("p",{className:"text-lg font-bold text-gray-900 truncate",title:t(o),children:t(o)})]})]})}),e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4 overflow-hidden",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-red-100 rounded-lg flex-shrink-0",children:e.jsx("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 12H4m16 0l-4 4m4-4l-4-4"})})}),e.jsxs("div",{className:"mr-4 min-w-0 flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 truncate",children:"إجمالي التكاليف"}),e.jsx("p",{className:"text-lg font-bold text-red-600 truncate",title:t(c),children:t(c)})]})]})}),e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4 overflow-hidden",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`p-2 rounded-lg flex-shrink-0 ${l>=0?"bg-green-100":"bg-red-100"}`,children:e.jsx("svg",{className:`w-6 h-6 ${l>=0?"text-green-600":"text-red-600"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})})}),e.jsxs("div",{className:"mr-4 min-w-0 flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 truncate",children:"صافي الربح"}),e.jsx("p",{className:`text-lg font-bold truncate ${l>=0?"text-green-600":"text-red-600"}`,title:t(l),children:t(l)})]})]})})]})]}),e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"البحث عن مشروع أو عميل...",value:d,onChange:s=>h(s.target.value),className:"w-full pr-10 pl-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),e.jsx("svg",{className:"absolute right-3 top-2.5 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:m.map(s=>e.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 hover:shadow-lg transition-shadow duration-200",children:[e.jsx("div",{className:"p-6 border-b border-gray-100",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:s.name}),e.jsxs("p",{className:"text-sm text-gray-600 mb-3",children:["العميل: ",e.jsx("span",{className:"font-medium text-gray-900",children:s.client_name})]}),s.description&&e.jsx("p",{className:"text-sm text-gray-500 line-clamp-2",children:s.description})]}),e.jsxs("div",{className:"flex flex-col gap-2 mr-4",children:[e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full border ${u(s.status)}`,children:f(s.status)}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full border ${g(s.payment_status)}`,children:j(s.payment_status)})]})]})}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"grid grid-cols-1 gap-4 mb-4",children:e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"قيمة المشروع"}),e.jsx("span",{className:"text-lg font-bold text-gray-900",children:t(s.project_value)})]}),e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"المدفوع"}),e.jsx("span",{className:"text-sm font-semibold text-green-600",children:t(s.paid_amount)})]}),e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"كلف التطوير"}),e.jsx("span",{className:"text-sm font-semibold text-red-600",children:t(s.development_costs?.reduce((r,n)=>r+parseFloat(n.amount||0),0)||0)})]}),e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"صافي الربح"}),e.jsx("span",{className:`text-sm font-semibold ${s.paid_amount-(s.development_costs?.reduce((r,n)=>r+parseFloat(n.amount||0),0)||0)>=0?"text-emerald-600":"text-red-600"}`,children:t(s.paid_amount-(s.development_costs?.reduce((r,n)=>r+parseFloat(n.amount||0),0)||0))})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"المتبقي"}),e.jsx("span",{className:"text-sm font-semibold text-red-600",children:t(s.remaining_amount)})]})]})}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"نسبة الدفع"}),e.jsxs("span",{className:"text-sm font-semibold text-blue-600",children:[Math.round(s.paid_amount/s.project_value*100).toLocaleString("en-US"),"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${Math.min(s.paid_amount/s.project_value*100,100)}%`}})})]}),e.jsxs("div",{className:"space-y-2 mb-4",children:[s.manager&&e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx("svg",{className:"w-4 h-4 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),"مدير المشروع: ",s.manager.name]}),s.start_date&&e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx("svg",{className:"w-4 h-4 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"تاريخ البداية: ",new Date(s.start_date).toLocaleDateString("en-US")]}),s.delivery_date&&e.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[e.jsx("svg",{className:"w-4 h-4 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),"موعد التسليم: ",new Date(s.delivery_date).toLocaleDateString("en-US")]})]})]}),e.jsxs("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-100 flex justify-between items-center",children:[e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(i,{href:route("admin.client-projects.show",s.id),className:"inline-flex items-center px-3 py-1.5 bg-blue-100 hover:bg-blue-200 text-blue-700 text-sm font-medium rounded-lg transition-colors duration-200",children:[e.jsxs("svg",{className:"w-4 h-4 ml-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),"عرض"]}),e.jsxs(i,{href:route("admin.client-projects.edit",s.id),className:"inline-flex items-center px-3 py-1.5 bg-yellow-100 hover:bg-yellow-200 text-yellow-700 text-sm font-medium rounded-lg transition-colors duration-200",children:[e.jsx("svg",{className:"w-4 h-4 ml-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"تعديل"]})]}),e.jsxs("button",{onClick:()=>v(s.id),className:"inline-flex items-center px-3 py-1.5 bg-red-100 hover:bg-red-200 text-red-700 text-sm font-medium rounded-lg transition-colors duration-200",children:[e.jsx("svg",{className:"w-4 h-4 ml-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"حذف"]})]})]},s.id))}),m.length===0&&e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-12 text-center",children:[e.jsx("svg",{className:"w-16 h-16 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"لا توجد مشاريع عملاء"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"ابدأ بإضافة أول مشروع عميل"}),e.jsxs(i,{href:route("admin.client-projects.create"),className:"inline-flex items-center px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-colors duration-200",children:[e.jsx("svg",{className:"w-5 h-5 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"إضافة مشروع جديد"]})]}),a.links&&a.links.length>3&&e.jsx("div",{className:"flex justify-center",children:e.jsx("nav",{className:"flex space-x-1",children:a.links.map((s,r)=>e.jsx(i,{href:s.url||"#",className:`px-3 py-2 text-sm font-medium rounded-lg ${s.active?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-50 border border-gray-300"}`,dangerouslySetInnerHTML:{__html:s.label}},r))})})]})]})}export{W as default};
