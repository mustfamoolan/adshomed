import{r as o,j as e,H as w,L as c,a as x}from"./app-CX5FMW1s.js";import{A as k}from"./AdminLayout-Bv6JVXqp.js";function S({project:n,campaigns:a,marketingTypes:m}){const[u,l]=o.useState(!1),[s,r]=o.useState({name:"",description:"",start_date:"",end_date:"",budget:"",marketing_type_key:"",status:"draft",notes:""}),i=t=>new Intl.NumberFormat("en-US",{style:"currency",currency:"IQD",minimumFractionDigits:0,maximumFractionDigits:0}).format(t||0),h=t=>{switch(t){case"draft":return"bg-gray-100 text-gray-800 border-gray-200";case"active":return"bg-green-100 text-green-800 border-green-200";case"paused":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"completed":return"bg-blue-100 text-blue-800 border-blue-200";case"cancelled":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},g=t=>{switch(t){case"draft":return"مسودة";case"active":return"نشطة";case"paused":return"متوقفة";case"completed":return"مكتملة";case"cancelled":return"ملغية";default:return"غير محدد"}},b=t=>{t.preventDefault(),x.post(route("admin.campaigns.store"),{project_id:n.id,...s},{onSuccess:()=>{l(!1),r({name:"",description:"",start_date:"",end_date:"",budget:"",marketing_type_key:"",status:"draft",notes:""})}})},p=t=>{confirm("هل أنت متأكد من حذف هذه الحملة؟")&&x.delete(route("admin.campaigns.destroy",t))},j=()=>{if(s.start_date&&s.end_date){const t=new Date(s.start_date),d=new Date(s.end_date),N=Math.abs(d-t);return Math.ceil(N/(1e3*60*60*24))+1}return 0},f=a.reduce((t,d)=>t+parseFloat(d.budget||0),0),y=a.reduce((t,d)=>t+parseFloat(d.actual_cost||0),0),v=a.filter(t=>t.status==="active").length;return a.filter(t=>t.status==="completed").length,e.jsxs(k,{title:`حملات المشروع: ${n.name}`,children:[e.jsx(w,{title:`حملات المشروع: ${n.name}`}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx(c,{href:route("admin.projects.index"),className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"المشاريع"}),e.jsx("span",{className:"text-gray-400",children:"/"}),e.jsx("span",{className:"text-gray-900 text-sm font-medium",children:n.name})]}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"حملات المشروع"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"إدارة الحملات الإعلانية للمشروع"})]}),e.jsxs("button",{onClick:()=>l(!0),className:"inline-flex items-center px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-colors duration-200",children:[e.jsx("svg",{className:"w-5 h-5 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"إضافة حملة جديدة"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5.882V19.24a1.76 1.76 0 01-3.417.592l-2.147-6.15M18 13a3 3 0 100-6M5.436 13.683A4.001 4.001 0 017 6h1.832c4.1 0 7.625-1.234 9.168-3v14c-1.543-1.766-5.067-3-9.168-3H7a3.988 3.988 0 01-1.564-.317z"})})}),e.jsxs("div",{className:"mr-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"إجمالي الحملات"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:a.length.toLocaleString("en-US")})]})]})}),e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsxs("div",{className:"mr-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"حملات نشطة"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:v.toLocaleString("en-US")})]})]})}),e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:e.jsx("svg",{className:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})})}),e.jsxs("div",{className:"mr-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"إجمالي الميزانية"}),e.jsx("p",{className:"text-lg font-bold text-gray-900",children:i(f)})]})]})}),e.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-red-100 rounded-lg",children:e.jsx("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 12H4m16 0l-4 4m4-4l-4-4"})})}),e.jsxs("div",{className:"mr-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"إجمالي الإنفاق"}),e.jsx("p",{className:"text-lg font-bold text-red-600",children:i(y)})]})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"قائمة الحملات"})}),a.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"اسم الحملة"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"المنصة"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"الفترة"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"الميزانية"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"الإنفاق"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"الحالة"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"العمليات"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:a.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:t.name}),t.description&&e.jsx("div",{className:"text-sm text-gray-500 truncate max-w-xs",children:t.description})]})}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:t.marketing_type?.name_ar||"غير محدد"}),e.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:e.jsxs("div",{children:[e.jsx("div",{children:new Date(t.start_date).toLocaleDateString("en-US")}),e.jsxs("div",{className:"text-gray-500",children:["إلى ",new Date(t.end_date).toLocaleDateString("en-US")]})]})}),e.jsx("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:i(t.budget)}),e.jsx("td",{className:"px-6 py-4 text-sm text-red-600 font-medium",children:i(t.actual_cost)}),e.jsx("td",{className:"px-6 py-4",children:e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full border ${h(t.status)}`,children:g(t.status)})}),e.jsxs("td",{className:"px-6 py-4 text-sm font-medium space-x-2",children:[e.jsx(c,{href:route("admin.campaigns.show",t.id),className:"text-blue-600 hover:text-blue-900",children:"عرض"}),e.jsx(c,{href:route("admin.campaigns.edit",t.id),className:"text-yellow-600 hover:text-yellow-900",children:"تعديل"}),e.jsx("button",{onClick:()=>p(t.id),className:"text-red-600 hover:text-red-900",children:"حذف"})]})]},t.id))})]})}):e.jsxs("div",{className:"p-12 text-center",children:[e.jsx("svg",{className:"w-12 h-12 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5.882V19.24a1.76 1.76 0 01-3.417.592l-2.147-6.15M18 13a3 3 0 100-6M5.436 13.683A4.001 4.001 0 017 6h1.832c4.1 0 7.625-1.234 9.168-3v14c-1.543-1.766-5.067-3-9.168-3H7a3.988 3.988 0 01-1.564-.317z"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"لا توجد حملات إعلانية"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"ابدأ بإنشاء أول حملة إعلانية لهذا المشروع"}),e.jsxs("button",{onClick:()=>l(!0),className:"inline-flex items-center px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg transition-colors duration-200",children:[e.jsx("svg",{className:"w-5 h-5 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"إنشاء حملة جديدة"]})]})]})]}),u&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsx("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-screen overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"إضافة حملة جديدة"}),e.jsx("button",{onClick:()=>l(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("form",{onSubmit:b,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["اسم الحملة ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:s.name,onChange:t=>r({...s,name:t.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"وصف الحملة"}),e.jsx("textarea",{value:s.description,onChange:t=>r({...s,description:t.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["تاريخ البداية ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"date",value:s.start_date,onChange:t=>r({...s,start_date:t.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["تاريخ النهاية ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"date",value:s.end_date,onChange:t=>r({...s,end_date:t.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",min:s.start_date,required:!0})]})]}),s.start_date&&s.end_date&&e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:e.jsxs("span",{className:"text-sm font-medium text-blue-800",children:["مدة الحملة: ",j().toLocaleString("en-US")," يوم"]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["الميزانية (IQD) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",value:s.budget,onChange:t=>r({...s,budget:t.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",min:"0",step:"0.01",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["منصة التسويق ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:s.marketing_type_key,onChange:t=>r({...s,marketing_type_key:t.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,children:[e.jsx("option",{value:"",children:"اختر المنصة"}),m.map(t=>e.jsx("option",{value:t.key,children:t.name_ar},t.key))]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"حالة الحملة"}),e.jsxs("select",{value:s.status,onChange:t=>r({...s,status:t.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"draft",children:"مسودة"}),e.jsx("option",{value:"active",children:"نشطة"}),e.jsx("option",{value:"paused",children:"متوقفة"}),e.jsx("option",{value:"completed",children:"مكتملة"}),e.jsx("option",{value:"cancelled",children:"ملغية"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ملاحظات"}),e.jsx("textarea",{value:s.notes,onChange:t=>r({...s,notes:t.target.value}),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>l(!1),className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"إلغاء"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg",children:"إنشاء الحملة"})]})]})]})})})]})}export{S as default};
